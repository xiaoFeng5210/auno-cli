{"version":3,"sources":["../package.json","../cli.ts","../src/utils/renderTemplate.ts"],"sourcesContent":["{\n  \"name\": \"auno-cli\",\n  \"version\": \"0.0.2\",\n  \"description\": \"编写一个可以执行ts文件的node cli工具，使用tsup打包。方便用户快速创建一个ts node项目\",\n  \"main\": \"dist/cli.js\",\n  \"type\": \"module\",\n  \"scripts\": {\n    \"start\": \"nodemon --delay 1000ms dist/auno.js\",\n    \"local\": \"auno-cli create local\",\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\",\n    \"watch\": \"tsup --format esm --watch\",\n    \"build\": \"tsup --format esm && tsup --dts --format esm\",\n    \"dts\": \"tsup --dts --format esm\",\n    \"lint\": \"eslint --ext .ts src\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/xiaoFeng5210/typescript-node-cli.git\"\n  },\n  \"keywords\": [\n    \"tsup\", \"typescript\", \"node\", \"cli\", \"nodemon\", \"build\", \"cac\"\n  ],\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"bugs\": {\n    \"url\": \"https://github.com/xiaoFeng5210/typescript-node-cli/issues\"\n  },\n  \"homepage\": \"https://github.com/xiaoFeng5210/typescript-node-cli#readme\",\n  \"devDependencies\": {\n    \"@types/eslint\": \"^8.56.2\",\n    \"@types/node\": \"^20.11.10\",\n    \"eslint\": \"^8.56.0\",\n    \"nodemon\": \"^3.0.3\",\n    \"tsup\": \"^8.0.1\",\n    \"typescript\": \"^5.3.3\"\n  },\n  \"dependencies\": {\n    \"cac\": \"^6.7.14\",\n    \"fastify\": \"^4.26.0\"\n  },\n  \"bin\": {\n    \"auno-cli\": \"bin/auno.js\"\n  }\n}\n","import cac from \"cac\";\nimport path from \"node:path\"\nimport { createNodeProject } from './auno'\nimport { renderTemplate } from './src/utils/renderTemplate'\n\nconst version = require('./package.json').version\n\nconst cli = cac('auno').version(version).help()\n\ncli.command('create <project>', 'start create new project')\n  .option('--template <template>', 'choose a template', { default: 'node' })\n  .action((project, options) => {  // 第一个参数project - 项目名称，第二个参数options - 选项\n    if (options.template === 'node') {\n      if (project) {\n        renderTemplate('ts-node', project)\n      }\n    }\n  })\n\ncli.parse()\n","import fs from 'node:fs'\nimport path, { dirname } from 'node:path';\n\nexport type TemplateRoot = 'ts-node' \n\nexport async function renderTemplate(templateRoot: TemplateRoot, target?: string) {\n  const cwd = process.cwd()\n  const dirPathPrefix = path.resolve(cwd, 'src/template')\n  const dirPath = path.join(dirPathPrefix, templateRoot)\n  fs.readdir(dirPath, { withFileTypes: true }, (err, files) => {\n    readRootAndCopy(files, target)\n  })\n}\n\n\nfunction readRootAndCopy(files: fs.Dirent[], target: string) {\n  if (fs.existsSync(target)) {\n    // 删除文件夹\n    fs.rmSync(target, { recursive: true, force: true });\n  }\n  fs.mkdirSync(target)\n  const targetRealPath = path.resolve(process.cwd(), target)\n  // 列出根目录所有\n  for (let f of files) {\n    if (f.name !== 'node_modules') {\n      if (f.isDirectory()) {\n        fs.mkdirSync(path.join(targetRealPath, f.name))\n        recursionDir(f.name, f.path, targetRealPath)\n      }\n      else {\n        copyFileToDest(f.name, f.path, targetRealPath)\n      }\n    }\n  }\n}\n\nfunction recursionDir(dirName: string, dirPath: string, parentPath: string) {\n  const needCopyDirPath = path.join(dirPath, dirName);\n  const destPath = path.join(parentPath, dirName)\n  const child = fs.readdirSync(needCopyDirPath, { withFileTypes: true })\n  if (Array.isArray(child) && child.length > 0) {\n    loopFileAndCopyToDest(child, needCopyDirPath, destPath)\n  }\n}\n\nfunction loopFileAndCopyToDest(child: fs.Dirent[], needCopyDirPath: string, destPath: string) {\n  for (let c of child) {\n    if (c.isDirectory()) {\n      // 在目标文件夹创建同名文件夹\n      fs.mkdirSync(path.join(destPath, c.name))\n      recursionDir(c.name, needCopyDirPath, destPath)\n    }\n    else {\n      copyFileToDest(c.name, needCopyDirPath, destPath)\n    }\n  }\n}\n\nfunction copyFileToDest(copyName: string, copyPath: string, targetPath: string) {\n  const filePath = path.join(copyPath, copyName)\n  const destPath = path.join(targetPath, copyName)\n  fs.copyFileSync(filePath, destPath)\n}\n"],"mappings":"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","names":[]}